{"version":3,"file":"index.js","sources":["../src/js/consts.js","../src/js/api.js","../src/js/taskListTemplate.js","../src/js/handlers.js","../src/main.js"],"sourcesContent":["const refs = {\n  mainForm: document.querySelector('#mainForm'),\n  list: document.querySelector('.js-list'),\n  loader: document.querySelector('.js-loader'),\n};\n\nexport { refs };\n","const BASE_URL = 'https://671cfe1509103098807be37b.mockapi.io';\n\nconst getTasks = () => {\n  return fetch(`${BASE_URL}/todos`).then(res => {\n    if (!res.ok) {\n      throw new Error(`Error while getting tasks: ${res.status}`);\n    }\n\n    return res.json();\n  });\n};\n\nconst postNewTask = task => {\n  const options = {\n    method: 'POST',\n    body: JSON.stringify(task),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n\n  return fetch(`${BASE_URL}/todos`, options).then(res => {\n    if (!res.ok) {\n      throw new Error(`Error while posting task: ${res.status}`);\n    }\n\n    return res.json();\n  });\n};\n\nconst deleteTask = id => {\n  const options = {\n    method: 'DELETE',\n  };\n\n  return fetch(`${BASE_URL}/todos/${id}`, options).then(res => {\n    if (!res.ok) {\n      throw new Error(`Error while deleting task ${id}: ${res.status}`);\n    }\n\n    return res.json();\n  });\n};\n\nconst updateTask = (id, updatedTask) => {\n  const options = {\n    method: 'PUT',\n    body: JSON.stringify(updatedTask),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  };\n\n  return fetch(`${BASE_URL}/todos/${id}`, options).then(res => {\n    if (!res.ok) {\n      throw new Error(`Error while updating task ${id}: ${res.status}`);\n    }\n\n    return res.json();\n  });\n};\n\nexport { getTasks, postNewTask, deleteTask, updateTask };\n","import { refs } from './consts';\nimport * as apiService from './api';\nimport Notiflix from 'notiflix';\n\nfunction createTaskItem(task) {\n  return `<li data-id=\"${task.id}\" class=\"${\n    task.isDone ? 'line-through' : ''\n  }\"><div><span>${task.text}</span><button>Delete</button></div></li>`;\n}\n\nfunction fillTasksListFromDB() {\n  apiService\n    .getTasks()\n    .then(tasks => {\n      const tasksAmount = tasks.length;\n\n      Notiflix.Notify.info(\n        `You have ${tasksAmount} task${tasksAmount > 1 ? 's' : ''}.`\n      );\n\n      // check tasks (arr in DB is empty)\n      if (tasksAmount === 0) {\n        return;\n      }\n\n      // create markup from DB data\n      const tasksMarkup = tasks.map(createTaskItem).join('');\n\n      // insert markup to HTML tasks list\n      refs.list.innerHTML = tasksMarkup;\n    })\n    .catch(err => {\n      console.error(err);\n      Notiflix.Notify.failure(err.message);\n    })\n    .finally(() => refs.loader.classList.add('hidden'));\n}\n\nexport { createTaskItem, fillTasksListFromDB };\n","import { refs } from './consts';\nimport { createTaskItem } from './taskListTemplate';\nimport * as apiService from './api';\nimport Notiflix from 'notiflix';\n\nfunction handleFormSubmit(event) {\n  event.preventDefault();\n\n  const form = event.target;\n\n  const taskValue = form.elements.task.value.trim();\n\n  apiService\n    .postNewTask({\n      text: taskValue,\n      isDone: false,\n    })\n    .then(createdTask => {\n      refs.list.insertAdjacentHTML('beforeend', createTaskItem(createdTask));\n    })\n    .catch(err => {\n      console.error(err);\n      Notiflix.Notify.failure(err.message);\n    })\n    .finally(() => form.reset());\n}\n\nfunction handleTaskClick(event) {\n  if (event.target.tagName === 'SPAN' || event.target.tagName === 'LI') {\n    const liEl = event.target.closest('li');\n    const liId = Number(liEl.dataset.id);\n\n    apiService\n      .updateTask(liId, { isDone: !liEl.classList.contains('line-through') })\n      .then(() => liEl.classList.toggle('line-through'))\n      .catch(err => {\n        console.error(err);\n        Notiflix.Notify.failure(err.message);\n      });\n  } else if (event.target.tagName === 'BUTTON') {\n    const liEl = event.target.closest('li');\n    const liId = Number(liEl.dataset.id);\n\n    apiService\n      .deleteTask(liId)\n      .then(() => liEl.remove())\n      // .then(_ => liEl.remove())\n      .catch(err => {\n        console.error(err);\n        Notiflix.Notify.failure(err.message);\n      });\n  }\n}\n\nexport { handleFormSubmit, handleTaskClick };\n","import './css/common.css';\n\nimport './css/style.css';\nimport { fillTasksListFromDB } from './js/taskListTemplate.js';\nimport { refs } from './js/consts.js';\nimport { handleFormSubmit, handleTaskClick } from './js/handlers.js';\n\n// load tasks from database\nfillTasksListFromDB();\n\nrefs.mainForm.addEventListener('submit', handleFormSubmit);\nrefs.list.addEventListener('click', handleTaskClick);\n"],"names":["refs","BASE_URL","getTasks","res","postNewTask","task","options","deleteTask","id","updateTask","updatedTask","createTaskItem","fillTasksListFromDB","apiService\n    .getTasks","tasks","tasksAmount","Notiflix","tasksMarkup","err","handleFormSubmit","event","form","taskValue","apiService\n    .postNewTask","createdTask","handleTaskClick","liEl","liId","apiService\n      .updateTask","apiService\n      .deleteTask"],"mappings":"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"}